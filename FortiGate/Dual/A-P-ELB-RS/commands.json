"fgaCustomDataBody": "[concat('config system sdn-connector\nedit AzureSDN\nset type azure\nnext\nend\n config router static\n edit 1\n set gateway ', variables('sn1GatewayIP'), '\n set device port1\n next\n edit 2\n set dst ', parameters('vnetAddressPrefix'), '\n set gateway ', variables('sn2GatewayIP'), '\n set device port2\n next\n edit 3\nset dst 168.63.129.16 255.255.255.255\nset device port2\n set gateway ', variables ('sn2GatewayIP'), '\n next\nedit 4\nset dst 168.63.129.16 255.255.255.255\nset device port1\n set gateway ', variables ('sn1GatewayIP'), '\n next\n end\n config router prefix-list\n edit Allow_LB\n config rule\n edit 1\n set prefix 10.255.255.0 255.255.255.0\n set ge 32\n  set le 32\n  next\n end\n next\n edit all_prefixes\n config rule\n edit 1\n set prefix any\n next\n end\n next\n edit AzureJP-Static-Filter\n config rule\n edit 1\n set action deny\n set prefix 10.0.0.0 255.0.0.0\n next\n edit 2\n  set action deny\n set prefix 168.63.129.16 255.255.255.255  next\n  edit 7\n set prefix any\n next\n end\n next\n end\n config router route-map\n edit Azure-Connected-Filter\n config rule\n edit 1\n set action deny\n set match-interface port1\n next\n edit 2\n set match-ip-address Allow_LB\n next\n edit 3\n set match-ip-address all_prefixes\n next\n end\n next\n edit Next-Hop-IP-iLB\n config rule\n edit 1\n set set-ip-nexthop', variables('sn2IPlb'), '\n next\n end\n next\n edit AzureJP-Static-Filter\n config rule\n edit 1\n set match-ip-address zureJP-Static-Filter\n next\n end\n next\n end\n config router bgp\n set as ', parameters('fortigateBgpASN'), '\n set router-id ', variables('fgtLoopbackIP'), '\n set ibgp-multipath enable\n set additional-path enable\n set recursive-next-hop enable\n set graceful-restart enable\n set additional-path-select 255\n config neighbor\n edit ', variable('sn5IPrsIP1'), '\n set activate6 disable\n set capability-graceful-restart enable\n  set ebgp-enforce-multihop enable\n set soft-reconfiguration enable\n set interface port2\n set remote-as ', parameters('routeServerAS'), '\n set route-map-out Next-Hop-IP-iLB\n set connect-timer 30\n set additional-path receive\n next\n config neighbor\n edit ', variable('sn5IPrsIP2'), '\n set activate6 disable\n set capability-graceful-restart enable\n  set ebgp-enforce-multihop enable\n set soft-reconfiguration enable\n set interface port2\n set remote-as ', parameters('routeServerAS'), '\n set route-map-out Next-Hop-IP-iLB\n set connect-timer 30\n set additional-path receive\n next\n config redistribute connected\n set route-map AzureJP-Connected-Filter\n end\n config redistribute static\n set status enable\n set route-map AzureJP-Static-Filter\n end\n end\n config system probe-response\n set http-probe-value OK\n set mode http-probe\n end\n 

config system interface\n edit port1\n set mode static\n set ip ', variables('sn1IPfga'), '/', variables('sn1CIDRmask'), '\n set description external\n set allowaccess probe-response\n next\n edit port2\n set mode static\n set ip ', variables('sn2IPfga'), '/', variables('sn2CIDRmask'), '\n set description internal\n set allowaccess probe-response\n next\n edit port3\n set mode static\n set ip ', variables('sn3IPfga'), '/', variables('sn3CIDRmask'), '\n set description hasyncport\n next\n edit port4\n set mode static\n set ip ', variables('sn4IPfga'), '/', variables('sn4CIDRmask'), '\n set description hammgmtport\n set allowaccess ping https ssh ftm\n next\n 

edit Branch210-Lo\n end\n set ip ', variable('fgtLoopbackIP'), '/255.255.255.255 \n set allowaccess ping https ssh snmp http fgfm\n set type loopback\n next\n end\n config system ha\n set group-name AzureHA\n set mode a-p\n set hbdev port3 100\n set session-pickup enable\n set session-pickup-connectionless enable\n set ha-mgmt-status enable\n config ha-mgmt-interfaces\n edit 1\n set interface port4\n set gateway ', variables('sn4GatewayIP'),'\n next\n end\n set override disable\n set priority 255\n set unicast-hb enable\n set unicast-hb-peerip ', variables('sn3IPfgb'), '\n end\n', variables('fmgCustomData'), parameters('fortiGateAdditionalCustomData'), '\n')]",

"fgaCustomDataBody": "[concat('config system sdn-connector\nedit AzureSDN\nset type azure\nnext\nend\nconfig router static\n edit 1\n set gateway ', variables('sn1GatewayIP'), '\n set device port1\n next\n edit 2\n set dst ', parameters('vnetAddressPrefix'), '\n set gateway ', variables('sn2GatewayIP'), '\n set device port2\n next\n edit 3\nset dst 168.63.129.16 255.255.255.255\nset device port2\n set gateway ', variables ('sn2GatewayIP'), '\n next\nedit 4\nset dst 168.63.129.16 255.255.255.255\nset device port1\n set gateway ', variables ('sn1GatewayIP'), '\n next\n end\n config system probe-response\n set http-probe-value OK\n set mode http-probe\n end\n config system interface\n edit port1\n set mode static\n set ip ', variables('sn1IPfga'), '/', variables('sn1CIDRmask'), '\n set description external\n set allowaccess probe-response\n next\n edit port2\n set mode static\n set ip ', variables('sn2IPfga'), '/', variables('sn2CIDRmask'), '\n set description internal\n set allowaccess probe-response\n next\n edit port3\n set mode static\n set ip ', variables('sn3IPfga'), '/', variables('sn3CIDRmask'), '\n set description hasyncport\n next\n edit port4\n set mode static\n set ip ', variables('sn4IPfga'), '/', variables('sn4CIDRmask'), '\n set description hammgmtport\n set allowaccess ping https ssh ftm\n next\n end\n config system ha\n set group-name AzureHA\n set mode a-p\n set hbdev port3 100\n set session-pickup enable\n set session-pickup-connectionless enable\n set ha-mgmt-status enable\n config ha-mgmt-interfaces\n edit 1\n set interface port4\n set gateway ', variables('sn4GatewayIP'),'\n next\n end\n set override disable\n set priority 255\n set unicast-hb enable\n set unicast-hb-peerip ', variables('sn3IPfgb'), '\n end\n', variables('fmgCustomData'), parameters('fortiGateAdditionalCustomData'), '\n')]",
"fgbCustomDataBody": "[concat('config system sdn-connector\nedit AzureSDN\nset type azure\nnext\nend\nconfig router static\n edit 1\n set gateway ', variables('sn1GatewayIP'), '\n set device port1\n next\n edit 2\n set dst ', parameters('vnetAddressPrefix'), '\n set gateway ', variables('sn2GatewayIP'), '\n set device port2\n next\n edit 3\nset dst 168.63.129.16 255.255.255.255\nset device port2\n set gateway ', variables ('sn2GatewayIP'), '\n next\nedit 4\nset dst 168.63.129.16 255.255.255.255\nset device port1\n set gateway ', variables ('sn1GatewayIP'), '\n next\n end\n config system probe-response\n set http-probe-value OK\n set mode http-probe\n end\n config system interface\n edit port1\n set mode static\n set ip ', variables('sn1IPfgb'), '/', variables('sn1CIDRmask'), '\n set description external\n set allowaccess probe-response\n next\n edit port2\n set mode static\n set ip ', variables('sn2IPfgb'), '/', variables('sn2CIDRmask'), '\n set description internal\n set allowaccess probe-response\n next\n edit port3\n set mode static\n set ip ', variables('sn3IPfgb'), '/', variables('sn3CIDRmask'), '\n set description hasyncport\n next\n edit port4\n set mode static\n set ip ', variables('sn4IPfgb'), '/', variables('sn4CIDRmask'), '\n set description hammgmtport\n set allowaccess ping https ssh ftm\n next\n end\n config system ha\n set group-name AzureHA\n set mode a-p\n set hbdev port3 100\n set session-pickup enable\n set session-pickup-connectionless enable\n set ha-mgmt-status enable\n config ha-mgmt-interfaces\n edit 1\n set interface port4\n set gateway ', variables('sn4GatewayIP'),'\n next\n end\n set override disable\n set priority 1\n set unicast-hb enable\n set unicast-hb-peerip ', variables('sn3IPfga'), '\n end\n', variables('fmgCustomData'), parameters('fortiGateAdditionalCustomData'), '\n')]",